<html>
<head>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
</head>
<body>
    <form name = "form" method="post" action="http://167.99.99.93:3000/getrestaurants">
        Location: <input type="text" name="location" />
        <input type="submit" value="Submit" />
    </form>

    <!-- <p>Lat: <div id="lat"></div></p>
    <p>Lng: <div id="lng"></div></p>
    <p>Link: <div id="link"></div></p>
    <p>Result: <div id="result"></div></p> -->

    <script>
      navigator.geolocation.getCurrentPosition(function(position) {
        // document.getElementById("lat").innerHTML = position.coords.latitude;
        // document.getElementById("lng").innerHTML = position.coords.longitude;
        var param = position.coords.latitude;
        param += ",";
        param += position.coords.longitude;
        document.form.location.value = param;
        // httpPost(param);
        // var baseUrl = "https://maps.googleapis.com/maps/api/geocode/json?latlng=";
        // baseUrl += position.coords.latitude;
        // baseUrl += ",";
        // baseUrl += position.coords.longitude;
        // baseUrl += "&key=AIzaSyA6E05tJ3hKFOBup2bGbncqg2LrU90Q0YA";
        // document.getElementById("link").innerHTML = baseUrl;
        // httpGet(baseUrl);
      });

      // function httpGet(theUrl)
      // {
      //     var xmlHttp = new XMLHttpRequest();
      //     xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
      //     xmlHttp.send( null );
      //     var parsedResult = JSON.parse(xmlHttp.responseText);
      //     var address = parsedResult.results[0].formatted_address;
      //     document.getElementById("result").innerHTML = address;
      //     httpPost(address);
      // }

      function httpPost(address) {
        var http = new XMLHttpRequest();
        var url = 'http://167.99.99.93:3000/getrestaurants';
        http.open('POST', url, false);
        http.send(address);
      }
    </script>


</body>
</html>
